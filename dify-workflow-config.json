{
  "name": "Slidev PPT Generator",
  "description": "ä½¿ç”¨è‡ªç„¶è¯­è¨€ç”ŸæˆSlidevæ¼”ç¤ºæ–‡ç¨¿çš„å·¥ä½œæµ",
  "icon": "ğŸ“Š",
  "mode": "workflow",
  "graph": {
    "nodes": [
      {
        "id": "start",
        "type": "start",
        "position": {
          "x": 100,
          "y": 100
        },
        "data": {
          "variables": [
            {
              "name": "user_query",
              "type": "string",
              "description": "ç”¨æˆ·è¦ç”Ÿæˆçš„PPTä¸»é¢˜æˆ–å†…å®¹æè¿°",
              "required": true
            }
          ]
        }
      },
      {
        "id": "llm_parser",
        "type": "llm",
        "position": {
          "x": 300,
          "y": 100
        },
        "data": {
          "model": "gpt-4",
          "prompt": "è¯·å°†ç”¨æˆ·çš„è¾“å…¥è½¬æ¢ä¸º PPT ç”Ÿæˆçš„ç»“æ„åŒ–å‚æ•°ï¼Œä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ JSON æ ¼å¼è¾“å‡ºï¼š\n{\n  \"title\": \"PPT æ ‡é¢˜\",\n  \"content\": \"è¯¦ç»†å†…å®¹æè¿°\",\n  \"theme\": \"ä¸»é¢˜é£æ ¼\",\n  \"visibility\": \"å¯è§æ€§\"\n}\n\nä¸»é¢˜é£æ ¼å¯é€‰å€¼ï¼šacademicï¼ˆå­¦æœ¯ï¼‰ã€defaultï¼ˆé»˜è®¤ï¼‰ã€frankfurtï¼ˆæ³•å…°å…‹ç¦ï¼‰ã€penguinï¼ˆä¼é¹…ï¼‰ã€vuetiful\nå¯è§æ€§å¯é€‰å€¼ï¼špublicï¼ˆå…¬å¼€ï¼‰ã€privateï¼ˆç§æœ‰ï¼‰\n\nç”¨æˆ·è¾“å…¥ï¼š{{user_query}}\n\nè¯·åªè¿”å› JSON æ ¼å¼ï¼Œä¸è¦åŒ…å«å…¶ä»–è§£é‡Šæ–‡å­—ã€‚",
          "variables": ["user_query"],
          "outputs": {
            "title": "string",
            "content": "string",
            "theme": "string",
            "visibility": "string"
          }
        }
      },
      {
        "id": "create_ppt",
        "type": "tool",
        "position": {
          "x": 500,
          "y": 100
        },
        "data": {
          "tool_name": "slidev_create",
          "parameters": {
            "title": "{{llm_parser.outputs.title}}",
            "content": "{{llm_parser.outputs.content}}",
            "theme": "{{llm_parser.outputs.theme}}",
            "visibility": "{{llm_parser.outputs.visibility}}",
            "generateContent": true
          }
        }
      },
      {
        "id": "wait_completion",
        "type": "code",
        "position": {
          "x": 700,
          "y": 100
        },
        "data": {
          "code": "import requests\nimport time\n\ndef main(slide_id: int):\n    \"\"\"è½®è¯¢ç­‰å¾…PPTç”Ÿæˆå®Œæˆ\"\"\"\n    url = f\"http://localhost:3001/api/mcp/dify/presentation/{slide_id}/status\"\n    max_attempts = 60\n    \n    for i in range(max_attempts):\n        try:\n            response = requests.get(url, timeout=10)\n            result = response.json()\n            \n            if result.get(\"success\"):\n                status = result.get(\"status\")\n                if status == \"completed\":\n                    return {\n                        \"success\": True,\n                        \"status\": status,\n                        \"preview_url\": result.get(\"previewUrl\"),\n                        \"message\": \"PPTç”Ÿæˆå®Œæˆ\"\n                    }\n                elif status == \"error\":\n                    return {\n                        \"success\": False,\n                        \"status\": status,\n                        \"message\": \"PPTç”Ÿæˆå¤±è´¥\"\n                    }\n            \n            # ç­‰å¾…5ç§’åé‡è¯•\n            time.sleep(5)\n            \n        except Exception as e:\n            return {\n                \"success\": False,\n                \"error\": str(e),\n                \"message\": \"çŠ¶æ€æŸ¥è¯¢å¤±è´¥\"\n            }\n    \n    return {\n        \"success\": False,\n        \"message\": \"ç­‰å¾…è¶…æ—¶\"\n    }",
          "inputs": {
            "slide_id": "{{create_ppt.outputs.slideId}}"
          },
          "outputs": {
            "success": "boolean",
            "status": "string",
            "preview_url": "string",
            "message": "string"
          }
        }
      },
      {
        "id": "end",
        "type": "end",
        "position": {
          "x": 900,
          "y": 100
        },
        "data": {
          "outputs": {
            "response": "{{wait_completion.outputs}}"
          }
        }
      }
    ],
    "edges": [
      {
        "source": "start",
        "target": "llm_parser"
      },
      {
        "source": "llm_parser",
        "target": "create_ppt"
      },
      {
        "source": "create_ppt",
        "target": "wait_completion"
      },
      {
        "source": "wait_completion",
        "target": "end"
      }
    ]
  }
}